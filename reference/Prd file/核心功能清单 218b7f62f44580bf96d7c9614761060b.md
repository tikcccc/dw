# 核心功能清单

### 模块一：核心概念与界面布局

| 功能点 | 详细描述 | 优先级 | 预期 |
| --- | --- | --- | --- |
| **用户角色与权限** | 系统定义了三种用户角色：
- **管理员 (Administrator)**: 拥有最高权限，可访问管理后台、管理用户与日志、并操作所有数据和绑定关系。
- **授权用户 (Authorized User)**: 项目核心参与者，可进入“绑定模式”管理自己上传的文件，拥有高级筛选权限。
- **普通用户 (View-only User)**: 项目观察者，仅有数据查看和筛选权限，无法进行任何修改操作。 | 3 | 7/7之前 |
| **三栏式响应布局** | 界面分为**左侧栏** (筛选与管理)、**中央区域** (BIM模型视图) 和 **右侧栏** (文件与绑定管理)。左右侧栏均支持独立展开与收起，以最大化中央视图空间。 | 1 | 7/7之前 |
| **顶部导航栏** | - **信息展示**: 显示当前项目名称和用户身份。
- **核心功能**: 提供用户登出、用户指南访问功能。
- **管理员入口**: 仅管理员可见“设置”图标，点击进入独立的管理后台页面。 | 2 | 7/7之前 |
| **面包屑导航** | 在进入RISC或文件详情页后，左上角提供面包屑导航，支持快速返回仪表盘主界面。 | 2 | 7/7之前 |
| **全局清除按钮** | 当存在任何筛选、高亮或列表选择时，在左侧栏顶部出现一个“清除全部”按钮，用于一键重置所有用户选择和筛选状态。 | 3 | 7/7之前 |

### 模块二：BIM模型查看器 (中央区域)

| 功能点 | 详细描述 | 优先级 | 预期 |
| --- | --- | --- | --- |
| **模型版本切换与历史视图** | - **版本切换**: 右上角提供模型版本下拉菜单，可在“当前版本”与多个“历史版本”之间切换。切换版本会重置所有筛选和高亮。
- **历史视图浮窗**: 点击关联了历史构件的条目时，视图中会出现一个可拖动的浮窗，展示版本变更信息，并提供在“当前视图”和“历史视图”之间切换的快捷按钮。 |  | 7/7之后 |
| **构件可视化与高亮系统 (核心交互)** | 系统采用“筛选高亮”与“手动高亮”的组合逻辑：
- **筛选高亮**: 使用HyD Code筛选后，匹配的构件自动进入“筛选高亮集”。
- **手动高亮**: 单击构件或列表项，可将构件添加/移出“手动高亮集”。
- **最终高亮**: 视图中最终高亮效果为以上两个高亮集的**并集**，呈现为**蓝色**。
- **交互优化**: 当HyD Code筛选激活时，单击列表项会弹窗提示用户保留还是清除筛选，赋予用户操作自由度。 | 1 | 7/7之前 |
| **右键上下文菜单** | 在BIM构件（先不做：或模型树条目）上右键单击，可弹出菜单，提供核心快捷功能：
- **管理关联文件**: (非绑定模式) 触发文件管理流程。
- **添加到绑定面板**: (绑定模式) 将构件批量加入购物车。
（先不做：- **显示所有对象**: (在模型树中) 恢复所有构件的白色显示。） | 2 | 7/7之前 |

### 模块三：筛选、查询与列表 (左右侧栏)

| 功能点 | 详细描述 |  | 预期 |
| --- | --- | --- | --- |
| **HyD Code 高级筛选** | - **功能**: 提供多层级 (如Project, Contractor) 的下拉菜单进行联动筛选。选择后，匹配的构件将自动高亮。 | 1 | 7/7之前 |
| **RISC 表单与文件列表** | - **筛选与搜索**: 两个列表均支持按各自的字段（如状态、类型、日期范围）进行筛选，并支持按核心ID（请求编号、文件名）进行模糊搜索。
RISC 筛选项：
1. 通过request no 和 inspection 进行模糊搜索
2.日期筛选 3.satus筛选 4. only show current model binding(只显示与最新模型绑定的表单）

文件筛选项：
1.通过文件名模糊搜索
2.文件类型筛选 3.日期筛选（上传日期筛选）
4.my uploaded files筛选（筛选出用户上传的文件）
5.only show current model binding 选项(只显示与最新模型绑定的表单）

要不要添加acssending 和 descending日期排列?

- 文件列表和RISC表单默认按照最新上传日期从上往下排列

- **联动交互**: 在任一列表中单击条目，会高亮其自身、在BIM视图中高亮其关联构件，并自动筛选另一个列表以显示关联条目。
- **详情跳转**: 单击条目中的链接（请求编号/文件名），可跳转至对应的详情页面。 | 1 | 7/7之前 |
| **绑定状态图标** | 在列表条目中，通过图标清晰展示绑定状态：
- **时钟 (History)**: 绑定于历史版本，但构件仍在当前版本中存在。
- **(无图标)**: 绑定于当前最新版本。   - **垃圾桶 (Deleted)**: 绑定的构件在当前版本中已被删除，但构件仍在历史版本中存在（这种情况构件删除相关的文件都删除文件列表不可见，不可以追溯历史版本构件） |  | 7/7之后 |

### 模块四：文件管理与初始关联

| 功能点 | 详细描述 |  |  |
| --- | --- | --- | --- |
| **文件管理与初始关联** | 这是一个以BIM模型为起点的关联流程：
1. 在BIM视图中高亮一个或多个构件。
2. 右键选择“管理关联文件”，进入全屏文件管理页面。
3. 在此页面，可查看已关联文件，也可从集成的ACC平台文件树中选择新文件进行上传和关联。
4. 允许对有权限的文件进行编辑和删除。
5. 确认操作后，建立所选构件与文件之间的关联。 | 2 | 7/7之前 |
|  |  |  |  |

### 模块五：绑定关系管理 (文件中心绑定模式)

| 功能点 | 详细描述 |  |  |
| --- | --- | --- | --- |
| **进入绑定模式** | - **权限与触发**: 仅**管理员**和**授权用户**可操作。通过点击文件上的“修改绑定(链接图标)”进入。授权用户只能操作自己上传的文件。
- **UI变化**: 激活“绑定模式”，右侧栏出现“绑定管理面板”(购物车)，BIM视图出现“添加所有高亮构件”按钮。 |  | 7/7之后 |
| **一对多绑定规则** | - **核心限制**: 绑定关系严格限制为 **1个文件 对 多个构件**。
- **文件锁定**: 进入模式后，当前文件被锁定在购物车中，流程围绕单个文件进行精细化编辑。 |  | 7/7之后 |
| **绑定管理面板 (购物车)** | - **构件添加**: 通过在BIM视图中高亮构件，然后点击“添加所有高亮构件”按钮，将构件批量添加进面板。
- **信息展示与版本一致性**: 面板实时显示待绑定项，并强制要求所有待绑定的构件必须属于**同一个BIM模型版本**。
- **侧栏收起交互**: 右侧栏收起时，面板变为悬浮的购物车图标，实时显示数量，点击可展开。 |  | 7/7之后 |
| **提交与退出** | - **提交**: 点击“提交绑定”按钮，经二次确认后，更新文件的关联关系和“更新日期”。
- **退出**: 提交成功或手动点击“取消”后，退出绑定模式，界面恢复正常。 |  | 7/7之后 |

### 模块六：版本对比与历史追溯

| 功能点 | 详细描述 |  |  |
| --- | --- | --- | --- |
| **历史视图浮窗** | - **触发**: **单击**绑定了“历史”或“已删除”构件的RISC或文件条目。
- **内容**: 弹出一个浮窗，简洁展示构件ID、新旧版本号、关联文件信息和核心变更说明。
- **操作**: 浮窗上提供“切换视图”按钮，允许用户在当前和历史BIM视图间无缝切换，并保持构件高亮，实现直观追溯。 |  | 7/7之后 |
| **删除条目处理** | 对于关联了“最新版本已删除”构件的条目，点击后同样会弹出历史浮窗，但BIM视图中不会高亮任何构件。这种情况构件删除相关的文件都删除文件列表不可见，不可以追溯历史版本构件。 |  | 7/7之后 |

### 模块七：管理员后台

| 功能点 | 详细描述 |  |  |
| --- | --- | --- | --- |
| **用户管理** | 在独立的“用户管理”页面中，管理员可以：
- 查看所有用户列表及其角色。
- 按用户名或邮箱搜索用户。
- 直接修改用户的角色。
- 邀请新用户加入系统。 |  | 7/7之后 |
| **活动日志** | 在独立的“活动日志”页面中，管理员可以：
- 查看所有关键操作的详细记录（时间、用户、操作、目标等）。
- 按用户、角色、日期范围进行筛选。
- 对日志详情进行全文关键词搜索。
- 将筛选后的日志结果导出为Excle /CSV文件。 |  | 7/7之后 |