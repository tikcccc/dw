# 产品需求文档 (PRD) - DWSS BIM 仪表板系统

## 一、文档信息 (Cover & Meta)

| 字段 | 内容 |
| --- | --- |
| 项目名称 | DWSS BIM 仪表板系统 |
| 文档版本 | V1.0.0 |
| 版本历史 | 见修订记录 |
| 更新时间 | 2025-07-06 |
| 产品经理 | 产品负责人 |
| 参与人员 | 开发 / 测试 / 设计 / 运营 |

## 二、修订记录

| 版本号 | 日期 | 内容描述 | 作者 | 状态 |
| --- | --- | --- | --- | --- |
| V1.0.0 | 2025-07-06 | 初稿创建，基于原型分析完成完整PRD | 产品经理 | 已评审 |

## 三、背景与目标

### 3.1 业务背景

建筑施工现场日常安全检查、质量监督依赖 DWSS (Digital Works Supervision System) 系统进行记录和追踪。而 BIM (Building Information Modeling) 作为施工全周期三维数据模型，具备构件层级的精细管理能力。

将 BIM 与 DWSS 系统打通，可实现**"模型即表单入口"**，提升检查效率、定位精度和资料一致性。当前建筑工程项目存在以下痛点：

- **数据孤岛**：BIM模型、施工文档、RISC表单分别存储在不同系统
- **定位困难**：缺乏统一的构件编码体系进行精确定位
- **版本管理混乱**：模型版本更新后，关联文档的版本一致性难以保证
- **协作效率低**：多角色用户需要在不同系统间频繁切换

### 3.2 问题陈述

当前系统存在的核心问题：

1. **缺乏统一的数据视图**：BIM构件、RISC表单、施工文档无法在同一界面关联查看
2. **版本追踪能力不足**：模型更新后，历史绑定关系失效，缺乏版本一致性验证
3. **权限管理粗放**：缺乏基于角色的精细化权限控制
4. **操作效率低下**：缺乏批量操作和智能筛选能力

### 3.3 产品目标 & 成功指标

**核心目标**：
- 构建 BIM 模型与 DWSS 表单的强关联视图
- 实现基于 HyD 构件编码的精确筛选与高亮显示
- 提供基于构件的表单与附件快速检索与预览
- 建立多版本模型的一致性管理机制

**成功指标**：
- 用户查找特定构件相关文档的时间缩短 60%
- 文档-构件绑定准确率达到 98% 以上
- 用户操作步骤减少 50%（从平均 6 步缩减到 3 步）
- 系统并发用户支持能力达到 50+ 用户

## 四、竞品 & 用户分析

### 4.1 用户画像

**主要用户群体**：

1. **BIM工程师**（20%）
   - 特征：技术背景强，熟悉BIM软件操作
   - 使用环境：办公室电脑，大屏幕，稳定网络
   - 核心需求：模型管理、构件属性编辑、版本控制

2. **项目经理**（25%）
   - 特征：管理背景，关注项目整体进度
   - 使用环境：移动办公，需要快速查看状态
   - 核心需求：项目概览、进度监控、决策支持

3. **施工工程师**（30%）
   - 特征：现场作业，操作简单直观
   - 使用环境：施工现场，可能网络不稳定
   - 核心需求：快速定位构件、查看施工文档、更新状态

4. **质量工程师**（25%）
   - 特征：注重细节，需要精确记录
   - 使用环境：现场检查+办公室整理
   - 核心需求：检查记录、问题追踪、报告生成

### 4.2 竞品分析

| 竞品 | 优势 | 劣势 | 差异化优势 |
| --- | --- | --- | --- |
| Autodesk Construction Cloud | BIM模型管理完善、生态丰富 | 缺乏与DWSS系统集成、定制化程度低 | 深度集成DWSS、HyD编码筛选 |
| Bentley ProjectWise | 文档管理强大、工作流完善 | 界面复杂、学习成本高 | 简化操作流程、直观可视化 |
| Trimble Connect | 协作功能强、移动端支持好 | BIM功能相对薄弱 | 专业BIM构件管理能力 |

## 五、产品整体设计

### 5.1 产品定位

DWSS BIM 仪表板定位为**建筑工程项目的统一数据协作平台**，在整体产品线中作为：
- DWSS系统的BIM可视化前端
- 构件级数据管理的核心工具
- 多角色协作的统一入口

### 5.2 价值主张 (Value Proposition)

**为BIM工程师**：提供直观的构件管理界面，支持多版本模型对比和批量操作
**为项目经理**：提供项目进度可视化监控，快速掌握文档绑定覆盖率
**为施工工程师**：提供快速构件定位和文档查看，简化现场作业流程
**为质量工程师**：提供精确的问题定位和追踪，完整的操作审计记录

### 5.3 用户流程/用户旅程

**主流程：构件-文档关联管理**
```
登录认证 → 项目选择 → 模型加载 → 构件筛选 → 文档绑定 → 状态同步
```

**支流程1：版本比较分析**
```
版本选择 → 差异识别 → 影响评估 → 绑定更新
```

**支流程2：多角色协作**
```
权限验证 → 任务分配 → 状态更新 → 结果反馈
```

## 六、功能需求

### 6.1 用户故事点

> 每个故事点都经过详细的技术任务分解，包含前端交互、后端API、数据库设计等具体实现点

### 认证与用户管理

1. **作为未授权用户**，我想要通过安全认证登录系统，以便安全访问BIM资源管理系统
   - 验收标准：支持多种认证方式，认证成功率≥99%
   - 故事点：5点

2. **作为管理员**，我想要批量导入用户邮箱并分配角色，以便快速配置团队权限
   - 验收标准：支持Excel导入，支持三种角色分配
   - 故事点：8点

3. **作为预注册用户**，当我首次登录时系统自动激活账户，以便立即获得访问权限
   - 验收标准：自动匹配预注册信息，权限即时生效
   - 故事点：5点

### 模型与构件操作

4. **作为管理员**，我想要管理多个BIM模型到项目的关联，以便管理复杂工程结构
   - 验收标准：支持多模型切换，模型加载时间≤10秒
   - 故事点：13点

5. **作为系统**，我要自动解析HyD Code并缓存索引，以便快速加载筛选器
   - 验收标准：解析准确率≥95%，缓存命中率≥80%
   - 故事点：8点

6. **作为工程师**，我想要通过7级联动筛选器精确选择构件，以便定位关键部件
   - 验收标准：筛选响应时间≤1秒，筛选准确率≥98%
   - 故事点：13点

7. **作为质检员**，当点击构件时自动高亮并展示详情，以便直观核查问题
   - 验收标准：高亮响应≤0.5秒，详情信息完整
   - 故事点：8点

### 资源关联管理

8. **作为管理员**，我想要为选定构件绑定特定版本文件，确保文档版本准确性
   - 验收标准：支持版本选择，绑定记录包含版本信息
   - 故事点：13点

9. **作为安全主管**，我想要将构件关联到DWSS的RISC表单，以便追溯检查记录
   - 验收标准：支持多对多关联，关联关系实时同步
   - 故事点：8点

10. **作为访客**，我想要点击文件时在内置查看器预览，无需跳转外部平台
    - 验收标准：预览成功率≥99%，加载时间≤3秒
    - 故事点：8点

11. **作为现场人员**，我想要通过表单记录跳转DWSS系统，直接处理整改任务
    - 验收标准：跳转链接准确率100%，目标页面正确打开
    - 故事点：5点

### 关系维护与检索

12. **作为管理员**，我想要使用可视化编辑器管理构件-文件-表单关系，以便批量调整绑定
    - 验收标准：支持拖拽操作，批量处理≥100个关系
    - 故事点：21点

13. **作为资料员**，我想要为文件添加多标签，实现多维分类管理
    - 验收标准：支持自定义标签，标签组合筛选
    - 故事点：8点

14. **作为检索用户**，我想要组合标签筛选文件，快速定位施工规范文档
    - 验收标准：筛选速度≤2秒，支持复合条件
    - 故事点：5点

15. **作为审计员**，我想要查看文件/表单的关联构件，追溯变更影响范围
    - 验收标准：关联关系完整显示，支持历史追踪
    - 故事点：8点

### 系统管理

16. **作为超级管理员**，我想要配置DWSS API密钥，确保表单跳转准确
    - 验收标准：配置界面安全，API连接测试通过
    - 故事点：5点

17. **作为运维**，当模型更新时收到同步提示，及时处理版本差异
    - 验收标准：自动检测更新，通知及时准确
    - 故事点：8点

18. **作为管理员**，我想要在回收站恢复误删的绑定关系，防止数据丢失
    - 验收标准：支持软删除，恢复操作成功率100%
    - 故事点：8点

19. **作为项目经理**，我想要导出构件资源覆盖率报表，分析项目进度
    - 验收标准：报表数据准确，支持Excel/PDF格式
    - 故事点：13点

### 效率工具

20. **作为管理员**，我想要批量解绑构件与资源，提升数据维护效率
    - 验收标准：批量操作成功率≥99%，操作日志完整
    - 故事点：8点

21. **作为用户**，我想要全局搜索HyD Code和文件，跨项目检索资源
    - 验收标准：搜索结果精准，响应时间≤3秒
    - 故事点：13点

22. **作为操作员**，我想要收到绑定成功/失败通知，确认任务执行结果
    - 验收标准：通知及时准确，状态更新实时
    - 故事点：5点

### 6.2 需求清单 (功能列表)

| 功能ID | 模块 | 描述 | 目标 | 优先级 | 依赖 | 成功标准 |
| --- | --- | --- | --- | --- | --- | --- |
| **F-001** | 用户认证 | 实现多种认证方式登录，获取用户token与基本信息 | 建立安全访问机制 | 高 | 认证服务API | 认证成功率≥99% |
| **F-002** | 用户信息存储 | 用户信息持久化存储，自动匹配预注册用户 | 建立本地用户体系 | 高 | 用户数据表 | 用户记录完整写入 |
| **F-003** | 权限管理 | 基于角色的权限控制系统 | 确保数据安全访问 | 高 | 角色权限表 | 权限校验准确率100% |
| **F-004** | 用户邀请 | 管理员邮箱批量邀请用户，指定角色 | 快速团队组建 | 中 | 邮件服务 | 邀请成功率≥95% |
| **F-005** | BIM模型加载 | 加载和解析BIM模型，构建构件索引 | 提供模型基础数据 | 高 | BIM解析引擎 | 解析成功率≥95% |
| **F-006** | HyD编码筛选 | 7级联动筛选器，基于HyD编码精确定位 | 实现精准构件筛选 | 高 | 构件索引 | 筛选准确率≥98% |
| **F-007** | 构件高亮 | 多层级高亮系统，支持不同状态显示 | 提供直观视觉反馈 | 高 | 3D渲染引擎 | 高亮响应≤1秒 |
| **F-008** | 构件选择 | 支持单选、多选、批量选择构件 | 提供灵活操作方式 | 高 | 交互控制器 | 选择准确率100% |
| **F-009** | 文档管理 | 文档上传、分类、搜索、预览功能 | 建立文档管理体系 | 高 | 文件存储服务 | 上传成功率≥99% |
| **F-010** | 绑定管理 | 构件与文档的多对多绑定关系管理 | 建立关联关系核心 | 高 | 关系数据表 | 绑定准确率≥98% |
| **F-011** | 版本管理 | 多版本模型支持，版本切换和比较 | 支持模型演进管理 | 高 | 版本控制系统 | 版本一致性100% |
| **F-012** | RISC表单集成 | 与DWSS系统RISC表单双向集成 | 连接业务系统 | 高 | DWSS API | 集成成功率≥99% |
| **F-013** | 标签系统 | 文档多标签分类和组合筛选 | 提供多维分类能力 | 中 | 标签管理服务 | 标签筛选准确率≥95% |
| **F-014** | 批量操作 | 支持批量绑定、解绑、标签分配等 | 提升操作效率 | 高 | 任务队列系统 | 批量操作成功率≥99% |
| **F-015** | 活动日志 | 记录所有关键操作，提供审计追踪 | 确保操作可追溯 | 中 | 日志服务 | 日志记录完整率100% |
| **F-016** | 通知系统 | 操作结果通知，状态变更提醒 | 提供及时反馈 | 低 | 消息推送服务 | 通知及时率≥95% |
| **F-017** | 报表导出 | 项目进度、覆盖率等报表生成导出 | 支持数据分析决策 | 低 | 报表引擎 | 报表准确率≥98% |
| **F-018** | 全局搜索 | 跨项目、跨类型的全局搜索功能 | 提供快速检索能力 | 中 | 搜索引擎 | 搜索准确率≥95% |
| **F-019** | 数据同步 | 与外部系统的数据同步机制 | 保持数据一致性 | 高 | 同步服务 | 同步成功率≥99% |
| **F-020** | 回收站 | 删除数据的软删除和恢复机制 | 防止数据误删 | 低 | 软删除机制 | 恢复成功率100% |

## 七、详细需求说明

### F-006 HyD编码7级筛选器

- **功能描述**：提供项目/承包商/区域/系统/位置/专业/序列号的7级联动筛选
- **交互规则**：
  - 支持各级独立选择或联动选择
  - 选择后实时更新构件高亮状态
  - 支持筛选条件的保存和重置
- **输入校验**：
  - HyD编码格式验证
  - 筛选条件有效性检查
- **异常处理**：
  - 筛选无结果时显示友好提示
  - 网络异常时保持界面可用
- **后置条件**：
  - 筛选结果实时反映在3D视图
  - 左右面板列表同步更新
- **成功标准**：筛选响应时间≤1秒，准确率≥98%

### F-010 构件文档绑定管理

- **功能描述**：管理构件与文档的多对多绑定关系
- **交互规则**：
  - 进入绑定模式后锁定当前操作文档
  - 支持批量添加构件到绑定关系
  - 版本一致性强制校验
- **输入校验**：
  - 构件ID有效性验证
  - 文档版本兼容性检查
- **异常处理**：
  - 版本冲突时显示确认对话框
  - 绑定失败时提供详细错误信息
- **后置条件**：
  - 绑定关系实时更新到数据库
  - 相关界面状态同步刷新
- **成功标准**：绑定操作成功率≥98%，响应时间≤2秒

### F-011 多版本模型管理

- **功能描述**：支持多版本BIM模型的切换、比较和管理
- **交互规则**：
  - 版本切换时保持当前选择状态
  - 版本差异用不同颜色标识
  - 支持历史版本的构件定位
- **输入校验**：
  - 版本ID有效性验证
  - 版本兼容性检查
- **异常处理**：
  - 版本加载失败时提供重试机制
  - 版本不兼容时显示警告信息
- **后置条件**：
  - 界面反映当前版本状态
  - 绑定关系显示版本标识
- **成功标准**：版本切换时间≤5秒，数据一致性100%

## 八、非功能需求 (NFR)

| 类型 | 要求描述 | 测试标准 |
| --- | --- | --- |
| 性能 | 构件筛选、高亮交互≤1秒，支持同时处理≥1000个构件 | 压力测试，模拟大型项目验证 |
| 并发性 | 支持50+用户同时在线操作，数据同步延迟≤3秒 | 并发测试，多用户场景验证 |
| 兼容性 | 支持Chrome 90+/Firefox 88+/Safari 14+/Edge 90+ | 浏览器兼容性自动化测试 |
| 可用性 | 主要操作流程≤3步完成，新用户5分钟内上手 | 用户体验测试，任务完成率≥95% |
| 安全性 | 数据传输加密，操作日志完整，权限控制严格 | 安全渗透测试，权限验证测试 |
| 可维护性 | 代码覆盖率≥90%，关键模块文档完整 | 静态代码分析，文档覆盖率检查 |
| 数据一致性 | 多版本数据同步准确率≥99%，绑定关系完整性100% | 数据一致性测试，事务回滚测试 |

## 九、迭代与上线计划

| 迭代 | 周期 | 功能包 | 验证点 | 故事点 |
| --- | --- | --- | --- | --- |
| **Sprint 1** | 2025-07-06 ～ 07-20 | 用户认证 + 基础权限 + BIM模型加载 | 20位用户内测登录成功率100% | 26点 |
| **Sprint 2** | 2025-07-21 ～ 08-03 | HyD筛选器 + 构件高亮 + 基础交互 | 筛选响应时间≤1秒，准确率≥98% | 29点 |
| **Sprint 3** | 2025-08-04 ～ 08-17 | 文档管理 + 绑定系统核心功能 | 绑定操作成功率≥98% | 31点 |
| **Sprint 4** | 2025-08-18 ～ 08-31 | 版本管理 + RISC表单集成 | 版本切换准确性100% | 26点 |
| **Sprint 5** | 2025-09-01 ～ 09-14 | 批量操作 + 高级功能 + 系统优化 | 批量操作成功率≥99% | 34点 |
| **Sprint 6** | 2025-09-15 ～ 09-28 | 测试优化 + 上线准备 | 全功能回归测试通过 | 21点 |

**总故事点**：167点
**预计总工期**：12周
**团队配置**：5-7人（1产品+2前端+2后端+1测试+1UI）

> ⚠️ 依赖说明：每轮迭代完成后需要进行集成测试，确保前置功能稳定后再开展下轮迭代。

## 十、运营 & 风险评估

### 10.1 风险评估

| 风险类型 | 风险描述 | 影响程度 | 发生概率 | 应对策略 |
| --- | --- | --- | --- | --- |
| **技术风险** | BIM模型解析兼容性问题 | 高 | 中 | 预研主流BIM格式，建立解析器兼容性测试 |
| **集成风险** | DWSS系统API不稳定 | 高 | 中 | 建立API监控，设计降级方案 |
| **性能风险** | 大型模型加载性能瓶颈 | 中 | 高 | 采用分片加载，LOD优化策略 |
| **用户风险** | 用户学习成本高，接受度低 | 中 | 中 | 简化交互流程，提供详细培训 |
| **数据风险** | 版本管理复杂，数据不一致 | 高 | 低 | 严格版本控制，数据校验机制 |

### 10.2 运营计划

**上线推广节奏**：
- **Alpha测试**（第10周）：内部团队测试，功能验证
- **Beta测试**（第11周）：小范围用户测试，收集反馈
- **灰度发布**（第12周）：部分项目试点，逐步扩大范围
- **全量上线**（第13周）：正式发布，全员培训

**关键监控指标**：
- **功能指标**：绑定成功率、筛选准确率、版本一致性
- **性能指标**：页面加载时间、操作响应时间、并发用户数
- **用户指标**：日活用户数、功能使用率、用户满意度
- **业务指标**：文档覆盖率提升、操作效率提升、错误率下降

## 十一、附录 & 支持材料

### 11.1 技术参考
- [Autodesk Forge API 文档](https://forge.autodesk.com/)
- [DWSS系统集成规范](内部文档)
- [HyD编码标准](行业标准)

### 11.2 数据模型设计
```sql
-- 核心实体表结构示例
CREATE TABLE components (
    id VARCHAR(50) PRIMARY KEY,
    name VARCHAR(200),
    version VARCHAR(20),
    model_version_id VARCHAR(50),
    hyd_code JSON,
    properties JSON,
    created_at TIMESTAMP,
    updated_at TIMESTAMP
);

CREATE TABLE bindings (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    component_id VARCHAR(50),
    file_id BIGINT,
    risc_id VARCHAR(50),
    binding_type ENUM('file', 'risc'),
    version VARCHAR(20),
    created_by BIGINT,
    created_at TIMESTAMP
);
```

### 11.3 API接口规范
- REST API设计遵循RESTful规范
- 统一错误码和返回格式
- API版本控制策略
- 认证授权机制

### 11.4 测试计划
- 单元测试覆盖率≥90%
- 集成测试覆盖核心业务流程
- 性能测试验证并发和大数据场景
- 用户验收测试确保易用性

### 11.5 术语表
| 术语 | 定义 |
| --- | --- |
| **HyD Code** | 建筑构件分层编码系统，包含7个层级 |
| **绑定模式** | 专用于构件-文档关联操作的界面模式 |
| **版本一致性** | 确保关联的构件和文档属于兼容的版本 |
| **高亮集** | 当前被高亮显示的构件集合 |
| **绑定购物车** | 临时存储待绑定构件和文档的容器 |

---

**文档状态**：✅ 已完成  
**评审状态**：🔄 待评审  
**文档负责人**：产品经理  
**技术负责人**：开发经理