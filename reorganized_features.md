### 6.2 功能列表（按模块重新整理）

#### 模块一：认证与用户管理

| 功能ID | 模块 | 描述 | 目标 | 优先级 | 依赖 | 成功标准 |
| --- | --- | --- | --- | --- | --- | --- |
| **F-001** | 登录认证 | 实现 Autodesk ACC 三步认证流程，获取用户 token 与基本信息（邮箱、ACC ID） | 接入 ACC，完成统一登录 | 高 | ACC OAuth API | 成功获取 token 并登录系统 |
| **F-002** | 用户信息存储与预注册匹配 | 用户信息持久化存储（邮箱、ACC ID、首次/末次登录时间），系统预加载用户邮箱列表，ACC 登录时自动匹配激活预注册账户（默认访客） | 建立本地用户体系，简化新用户接入流程 | 高 | 用户表、用户匹配服务 | 用户记录完整写入，预注册用户首次登录即激活 |
| **F-003** | 用户角色识别 | 登录后根据邮箱匹配预配置角色（超级管理员/管理员/访客），未匹配用户默认访客 | 权限控制入口 | 高 | 用户表、角色表 | 登录后权限实时生效 |
| **F-004** | 用户管理 | 超级管理员可添加/编辑/禁用用户，指定角色 | 管理系统用户与权限 | 中 | 用户表、权限模块 | 用户添加后登录自动匹配角色 |
| **F-005** | 权限校验 | 接口级权限控制：管理员可编辑，访客仅查看 | 数据操作安全控制 | 高 | 角色系统、API守卫 | 所有接口严格拦截越权操作 |
| **F-006** | 权限分层控制 | 功能级权限：超级管理员管理用户/系统设置，管理员管理项目，访客仅查看 | 精细化权限控制 | 高 | RBAC 权限模型 | 各角色只能访问授权功能 |

#### 模块二：项目与模型管理

| 功能ID | 模块 | 描述 | 目标 | 优先级 | 依赖 | 成功标准 |
| --- | --- | --- | --- | --- | --- | --- |
| **F-008** | 项目管理 | 管理员创建/编辑/归档项目（名称、描述、时间范围），支持项目状态管理 | 项目为最小管理单元 | 高 | 项目表 | 项目创建后出现在可操作列表 |
| **F-009** | 模型文件关联 | 管理员从 ACC 选择 BIM 文件关联到项目（支持多文件），记录文件元数据 | 建立模型入口 | 高 | ACC 文件接口、项目表 | 模型成功加载且可操作 |
| **F-010** | 多模型管理 | 项目关联多个 ACC 模型（如地上/地下结构），支持模型列表管理、模型间切换浏览、跨模型构件检索和绑定关系保持 | 复杂工程场景支持 | 中 | 模型关系表、模型切换服务 | 模型切换响应≤2s，跨模型检索准确率≥95% |
| **F-011** | 模型更新同步 | 当 ACC 模型更新时，系统自动/手动同步元数据并提示版本差异 | 保持模型数据时效性 | 高 | ACC Webhook、版本比对逻辑 | 变更构件可识别并更新 |

#### 模块三：HyD Code 系统

| 功能ID | 模块 | 描述 | 目标 | 优先级 | 依赖 | 成功标准 |
| --- | --- | --- | --- | --- | --- | --- |
| **F-012** | HyD Code 解析与验证 | 加载模型后自动解析 HyD Code 属性，构建结构化构件索引，验证 HyD Code 完整性 | 构件筛选与绑定的基础 | 高 | Viewer SDK、属性解析逻辑 | ≥95%构件解析成功，无HyD Code构件标记并提示 |
| **F-013** | HyD Code 7级筛选器 | 基于 HyD Code 生成动态 7 级联动筛选器，默认产生黄色高亮和列表筛选，手动点击产生蓝色高亮优先级更高 | 精准定位构件与智能交互 | 最高 | 构件索引数据、高亮系统、交互逻辑 | 筛选响应≤800ms，优先级逻辑准确执行 |
| **F-014** | HyD Code 历史追溯 | 基于 HyD Code 快速查找绑定历史版本的构件，对比更新前后功能变化 | 精确的版本对比和问题追溯 | 高 | 版本比对引擎、HyD Code索引 | 能够快速定位并对比同一构件的历史版本 |
| **F-015** | 无HyD Code构件处理 | 对缺少 HyD Code 的构件进行标识，禁止绑定操作并提供明确错误提示 | 确保绑定操作的数据完整性 | 高 | 构件属性验证、错误提示系统 | 无HyD Code构件100%被正确识别和处理 |
| **F-016** | HyD筛选范围检测与确认 | 检测点击条目的关联构件是否超出当前HyD筛选范围，超出时弹出确认对话框询问用户是否清除筛选条件查看所有关联构件 | 避免用户操作失误，提供用户选择的灵活性 | 最高 | HyD筛选器、构件关联系统、确认对话框组件 | 范围检测准确率100%，用户确认后操作准确执行 |

#### 模块四：视图交互与高亮系统

| 功能ID | 模块 | 描述 | 目标 | 优先级 | 依赖 | 成功标准 |
| --- | --- | --- | --- | --- | --- | --- |
| **F-017** | 构件选择与批量操作 | 支持框选/点选/筛选器多选构件，提供Select All和Clear All功能，支持一键选择/清除所有HyD筛选结果构件，操作区显示已选构件数量 | 提供完整的构件交互能力，提高批量操作效率 | 高 | Viewer SDK、批量操作框架 | 多选准确率100%，批量选择准确率100% |
| **F-018** | 构件高亮与聚焦 | 点击构件或关联资源时，在 Viewer 中高亮构件 | 可视化定位构件 | 高 | Viewer SDK | 高亮响应≤1s，定位精准 |
| **F-019** | BIM视图与列表双向联动 | 点击列表条目自动高亮关联构件并筛选另一个列表显示相关项目；点击BIM构件自动筛选两侧列表显示相关条目 | 实现数据间的即时双向联动交互 | 最高 | 事件处理服务、高亮系统、构件选择系统、列表筛选系统 | 点击响应时间≤1s，联动准确率100% |
| **F-020** | 高亮系统统一管理 | 筛选高亮(黄色)与手动高亮(蓝色)的统一管理，蓝色优先级更高 | 明确的高亮状态管理 | 最高 | 高亮状态管理器 | 高亮状态变化实时响应 |
| **F-021** | 全局清除功能 | 一键清除所有筛选条件、高亮选择和列表状态 | 快速重置系统状态 | 高 | 状态管理工具类 | 清除操作完整性100% |
| **F-022** | 右键菜单管理 | 在高亮构件上右键选择"管理关联文件"快速进入文件管理 | 提供快捷的操作入口 | 中 | 右键菜单组件 | 右键菜单响应时间≤300ms |

#### 模块五：资源关联与绑定

| 功能ID | 模块 | 描述 | 目标 | 优先级 | 依赖 | 成功标准 |
| --- | --- | --- | --- | --- | --- | --- |
| **F-023** | 构件绑定文件 | 管理员选择构件后关联 ACC 文件（多选），必须指定文件版本，记录绑定时间 | 构件↔文件多对多关系 | 高 | 文件版本接口、构件选择器 | 绑定记录含精确版本和时间信息 |
| **F-024** | 构件绑定表单 | 管理员将构件关联到 DWSS 系统的 RISC 表单（支持多对多），记录表单 ID 和跳转 URL | 连接模型与业务数据 | 高 | DWSS 表单 API | 点击可跳转至正确表单页 |
| **F-025** | 构件与资源双向关联查询 | 选择构件时展示所有关联的文件（含版本）和表单列表；点击文件/表单时高亮所有关联构件 | 构件与资源的双向追溯和关联视图 | 高 | 绑定关系表、绑定关系索引、前端展示组件、Viewer SDK | 实时显示完整资源记录，关联构件全部高亮显示 |
| **F-026** | 智能删除绑定 | 删除构件-文件绑定关系时智能判断影响范围，提供不同级别的确认提示 | 防止误操作和数据丢失 | 高 | 绑定关系分析、智能提示系统 | 准确识别影响范围，提供清晰警告 |
| **F-027** | 绑定关系修改 | 管理员修改文件关联的构件集合（增删构件） | 动态调整资源结构 | 高 | 构件选择器、版本管理 | 修改后视图实时更新 |
| **F-028** | 绑定关系可视化管理 | 提供关系图谱界面管理构件↔文件/表单的复杂关联关系，支持拖拽式批量关联/解绑和网络图展示 | 高效维护复杂绑定关系，可视化管理多对多关系 | 中 | 关系图谱组件、拖拽交互组件 | 支持拖拽式批量关联/解绑，关系图谱清晰展示 |
| **F-029** | 基于高亮构件的文件添加 | 只有蓝色高亮构件才能进行文件关联操作，包含状态检查 | 确保文件关联的准确性 | 高 | 构件选择系统、按钮状态管理 | 添加按钮状态准确响应 |

#### 模块六：文件管理

| 功能ID | 模块 | 描述 | 目标 | 优先级 | 依赖 | 成功标准 |
| --- | --- | --- | --- | --- | --- | --- |
| **F-030** | 文件预览 | 在嵌入式 Viewer 中预览文件 | 无需跳转 ACC 查看文件 | 高 | ACC Viewer SDK | 预览打开成功率≥99% |
| **F-031** | 文件标签系统 | 管理员创建/编辑/删除标签（名称、颜色、描述），为文件添加多标签（支持批量操作），在文件列表中按标签组合筛选（支持 0-N 个标签条件） | 统一文件分类体系，实现多维文件分类和精准检索 | 中 | 标签表、文件-标签关系表、标签检索服务 | 标签可复用无冗余，每个文件可关联≥1个标签，筛选准确率≥98% |
| **F-032** | 非模型资源管理 | 上传/管理项目文档（施工图、规范），独立于构件绑定 | 扩展项目知识库 | 低 | 文件存储服务 | 文件可检索下载 |
| **F-033** | 文件版本与时间管理 | 展示文件历史版本，支持版本对比和回滚绑定；记录文件上传时间（首次关联时间）和更新时间（任何关联变更时间），标识上传者 | 确保绑定版本准确性，准确的文件历史追踪 | 高 | ACC 版本 API、版本历史表、时间戳记录、用户关联 | 可查看/选择任意历史版本，时间记录准确，上传者信息完整 |
| **F-034** | 文件重复检测 | 上传文件前检测文件是否已存在于系统中，阻止重复上传 | 避免文件冗余和管理混乱 | 高 | 文件指纹识别、重复检测算法 | 重复文件检测准确率100% |
| **F-035** | 文件列表高级筛选 | 按文件名、类型、日期范围、个人文件、绑定状态筛选 | 快速定位目标文件 | 高 | 文件筛选服务 | 筛选结果准确率≥98% |
| **F-036** | 文件类型编辑权限 | 管理员或文件上传者可修改文件类型，但不能修改文件名 | 精细化文件管理权限 | 中 | 权限系统、文件编辑组件 | 权限控制准确性100% |

#### 模块七：RISC表单管理

| 功能ID | 模块 | 描述 | 目标 | 优先级 | 依赖 | 成功标准 |
| --- | --- | --- | --- | --- | --- | --- |
| **F-037** | 表单跳转 | 点击表单记录在新窗口打开 DWSS 表单详情页 | 快速访问原始业务数据 | 高 | DWSS URL 拼接逻辑 | 正确打开目标表单页 |
| **F-038** | DWSS 系统对接配置 | 管理员配置 DWSS API 密钥、表单模板映射规则 | 确保表单跳转准确性 | 高 | 系统配置模块 | 点击表单正确跳转目标系统 |
| **F-039** | RISC表单高级筛选 | 按请求编号、inspection、状态、日期范围、绑定状态筛选 | 精确定位RISC记录 | 高 | 筛选组件、模糊搜索 | 筛选响应时间≤500ms |

#### 模块八：系统管理与工具

| 功能ID | 模块 | 描述 | 目标 | 优先级 | 依赖 | 成功标准 |
| --- | --- | --- | --- | --- | --- | --- |
| **F-040** | 资源详情面板 | 展示构件绑定资源的详细信息：文件版本/上传时间/更新时间、表单状态/创建者等 | 提供完整资源上下文 | 高 | 资源元数据接口 | 关键信息完整展示 |
| **F-041** | 审计日志 | 记录关键操作：用户登录、绑定/解绑、文件关联等（操作者、时间、对象 ID） | 数据变更追踪 | 中 | 日志系统 | 所有操作可追溯 |
| **F-042** | 构件索引缓存 | 缓存解析后的构件数据（HyD Code、属性），支持增量更新 | 提升重复访问性能 | 中 | 缓存服务 | 二次加载时间减少 50% |
| **F-043** | 报表导出 | 导出项目资源报表（构件绑定覆盖率、文件分布等） | 业务数据分析 | 低 | 报表引擎 | 导出 Excel/PDF 格式完整 |
| **F-044** | 全局搜索 | 跨项目检索构件（HyD Code）、文件、表单 | 快速定位资源 | 中 | 全文索引引擎 | 搜索结果精准排序 |
| **F-045** | 资源回收站 | 删除的绑定关系进入回收站，支持恢复或永久清除 | 防止误操作数据丢失 | 低 | 软删除机制 | 数据可恢复，保留操作记录 |
| **F-046** | 通知中心 | 关键操作结果通知（绑定成功/失败、模型更新完成） | 实时反馈系统状态 | 低 | 消息推送服务 | 用户及时感知操作结果 |

### 功能优化总结

**优化效果**：将原有的 54 个功能精简为 46 个，消除重复和交叉，提高功能清晰度。

**主要优化内容**：
1. **合并重复功能**：合并 F-002+F-006、F-016+F-017、F-020+F-021、F-028+F-029、F-035+F-036+F-037、F-018+F-025、F-039+F-040
2. **优化功能描述**：明确 F-010 多模型管理具体能力，重新定义 F-032 为可视化管理界面
3. **整合批量操作**：将原 F-052 批量操作框架功能分散到具体功能模块中

### 模块分类说明

**模块一：认证与用户管理** - 基础用户体系和权限控制（F-001 至 F-006）
**模块二：项目与模型管理** - 项目创建和BIM模型管理（F-007 至 F-011）
**模块三：HyD Code 系统** - 基于HyD Code的构件识别、筛选和追溯（F-012 至 F-016）
**模块四：视图交互与高亮系统** - BIM视图与列表间的联动交互（F-017 至 F-022）
**模块五：资源关联与绑定** - 构件与文件、表单的绑定关系管理（F-023 至 F-029）
**模块六：文件管理** - 文件上传、预览、分类和筛选（F-030 至 F-036）
**模块七：RISC表单管理** - 表单跳转和筛选功能（F-037 至 F-039）
**模块八：系统管理与工具** - 审计、缓存、搜索等系统支撑功能（F-040 至 F-046）

这样的模块化分类让功能更加清晰，便于开发规划和维护。每个模块都有明确的功能边界和依赖关系。