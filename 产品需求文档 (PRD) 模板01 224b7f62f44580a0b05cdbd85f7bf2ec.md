# 产品需求文档 (PRD) 模板01

## 一、文档信息 (Cover & Meta)

| 字段 | 内容 |
| --- | --- |
| 项目名称 | XXX系统 |
| 文档版本 | V1.0.0 |
| 版本历史 | 见修订记录 |
| 更新时间 | 2025-07-01 |
| 产品经理 | XXX |
| 参与人员 | 开发 / 测试 / 设计 / 运营 |

## 二、修订记录

| 版本号 | 日期 | 内容描述 | 作者 | 状态 |
| --- | --- | --- | --- | --- |
| V1.0.0 | 2025-07-01 | 初稿创建 | 张三 | 已评审 |
| V1.0.1 | 2025-07-10 | 更新登录模块需求 | 李四 | 待评审 |

## 三、背景与目标

### 3.1 业务背景

建筑施工现场日常安全检查、质量监督依赖 DWSS (Digital Works Supervision System) 系统进行记录和追踪。而 BIM (Building Information Modeling) 作为施工全周期三维数据模型，具备构件层级的精细管理能力。

将 BIM ([Autodesk Docs](https://www.autodesk.com.cn/products/autodesk-docs/overview)) 与 DWSS 系统打通，可实现**“模型即表单入口”**，提升检查效率、定位精度和资料一致性。

### 3.2 问题陈述

当前系统存在的不足或业务指标未达成之处。

### 3.3 产品目标 & 成功指标

- 构建 BIM 模型与 DWSS 表单的强关联视图
- 实现基于 BIM 构件编码的表单绑定与高亮显示
- 提供基于构件的表单与附件快速检索与预览

## 四、竞品 & 用户分析

### 4.1 用户画像

目标用户特征、使用环境、核心需求。

### 4.2 竞品分析

标出竞品功能优劣、差异化点及调研洞察。

## 五、产品整体设计

### 5.1 产品定位

说明系统在整体产品线中的角色与定位。

### 5.2 价值主张 (Value Proposition)

用户使用该系统后能获得的核心价值。

### 5.3 用户流程/用户旅程

通过流程图或泳道图展示主流程和支流程。

## 六、功能需求

### 6.1 用户故事点

> 每个故事点可进一步拆分为技术任务，例如：
> 
> 
> **F-012 技术子任务**：
> 
> ① 接入 ACC 版本 API
> ② 构建版本选择器 UI
> ③ 建立构件-文件版本映射表
> ④ 设计多对多关系存储结构
> 

### 认证与用户管理

1. **作为未授权用户**，我想要通过 ACC 三步认证登录系统，以便安全访问资源管理系统
2. **作为超级管理员**，我想要批量导入用户邮箱并分配角色 (F-004)，以便快速配置团队权限
3. **作为预注册用户**，当我首次 ACC 登录时系统自动激活账户 (F-031)，以便立即获得访客权限

### 模型与构件操作

1. **作为管理员**，我想要关联多个 ACC 模型到项目 (F-007 F-026)，以便管理复杂工程结构
2. **作为用户**，系统自动解析 HyD Code 并缓存索引 (F-008 F-025)，以便快速加载筛选器
3. **作为工程师**，我想要通过 7 级联动筛选器精确选择构件 (F-009)，以便定位关键部件
4. **作为质检员**，当点击构件时自动高亮并展示详情 (F-011 F-016)，以便直观核查问题

### 资源关联管理

1. **作为管理员**，我想要为选定构件绑定特定版本 ACC 文件 (F-012 F-029)，确保文档版本准确性
2. **作为安全主管**，我想要将构件关联到 DWSS 的 RISC 表单 (F-013)，以便追溯检查记录
3. **作为访客**，我想要点击文件时在 Viewer 内预览 (F-014)，无需跳转 ACC 平台
4. **作为现场人员**，我想要通过表单记录跳转 DWSS 系统 (F-015)，直接处理整改任务

### 关系维护与检索

1. **作为管理员**，我想要使用可视化编辑器管理构件-文件-表单关系 (F-030)，以便批量调整绑定
2. **作为资料员**，我想要为文件添加多标签 (F-018 F-019)，实现多维分类管理
3. **作为检索用户**，我想要组合标签筛选文件 (F-020)，快速定位施工规范文档
4. **作为审计员**，我想要查看文件/表单的关联构件 (F-017)，追溯变更影响范围

### 系统管理

1. **作为超级管理员**，我想要配置 DWSS API 密钥 (F-036)，确保表单跳转准确
2. **作为运维**，当 ACC 模型更新时收到同步提示 (F-032)，及时处理版本差异
3. **作为管理员**，我想要在回收站恢复误删的绑定关系 (F-037)，防止数据丢失
4. **作为项目经理**，我想要导出构件资源覆盖率报表 (F-027)，分析项目进度

### 效率工具

1. **作为管理员**，我想要批量解绑构件与资源 (F-021 F-035)，提升数据维护效率
2. **作为用户**，我想要全局搜索 HyD Code 和文件 (F-034)，跨项目检索资源
3. **作为操作员**，我想要收到绑定成功/失败通知 (F-038)，确认任务执行结果

### 6.2 需求清单 (功能列表)

| 功能ID | 模块 | 描述 | 目标 | 优先级 | 依赖 | 成功标准 |
| --- | --- | --- | --- | --- | --- | --- |
| **F-001** | 登录认证 | 实现 Autodesk ACC 三步认证流程，获取用户 token 与基本信息（邮箱、ACC ID） | 接入 ACC，完成统一登录 | 高 | ACC OAuth API | 成功获取 token 并登录系统 |
| **F-002** | 用户信息存储 | 用户信息持久化存储（邮箱、ACC ID、首次/末次登录时间），自动匹配预注册用户 | 建立本地用户体系 | 高 | 用户表 | 用户记录完整写入 |
| **F-003** | 用户角色识别 | 登录后根据邮箱匹配预配置角色（超级管理员/管理员/访客），未匹配用户默认访客 | 权限控制入口 | 高 | 用户表、角色表 | 登录后权限实时生效 |
| **F-004** | 用户管理 | 超级管理员可添加/编辑/禁用用户（支持邮箱批量导入），指定角色 | 管理系统用户与权限 | 中 | 用户表、权限模块 | 用户添加后登录自动匹配角色 |
| **F-005** | 权限校验 | 接口级权限控制：管理员可编辑，访客仅查看 | 数据操作安全控制 | 高 | 角色系统、API守卫 | 所有接口严格拦截越权操作 |
| **F-006** | 项目管理 | 管理员创建/编辑/归档项目（名称、描述、时间范围），支持项目状态管理 | 项目为最小管理单元 | 高 | 项目表 | 项目创建后出现在可操作列表 |
| **F-007** | 模型文件关联 | 管理员从 ACC 选择 BIM 文件关联到项目（支持多文件），记录文件元数据 | 建立模型入口 | 高 | ACC 文件接口、项目表 | 模型成功加载且可操作 |
| **F-008** | 模型加载与构件解析 | 加载模型后自动解析 HyD Code 属性，构建结构化构件索引（含版本追踪） | 构件筛选与绑定的基础 | 高 | Viewer SDK、属性解析逻辑 | ≥95%构件解析成功，支持版本更新 |
| **F-009** | HyD Code 7级筛选器 | 基于 HyD Code 生成动态 7 级联动筛选器（支持多选末级构件） | 精准定位构件 | 高 | 构件索引数据、前端筛选组件 | 筛选响应≤800ms，准确率≥98% |
| **F-010** | 构件选择操作 | 支持框选/点选/筛选器多选构件，操作区显示已选构件数量 | 提供构件级交互能力 | 高 | Viewer SDK | 多选准确率 100% |
| **F-011** | 构件高亮与聚焦 | 点击构件或关联资源时，在 Viewer 中高亮并聚焦到构件位置 | 可视化定位构件 | 高 | Viewer SDK | 高亮响应≤1s，定位精准 |
| **F-012** | 构件绑定文件 | 管理员选择构件后关联 ACC 文件（多选），必须指定文件版本 | 构件↔文件多对多关系 | 高 | 文件版本接口、构件选择器 | 绑定记录含精确版本信息 |
| **F-013** | 构件绑定表单 | 管理员将构件关联到 DWSS 系统的 RISC 表单（支持多对多），记录表单 ID 和跳转 URL | 连接模型与业务数据 | 高 | DWSS 表单 API | 点击可跳转至正确表单页 |
| **F-014** | 文件预览 | 在嵌入式 Viewer 中预览关联文件的具体版本 | 无需跳转 ACC 查看文件 | 高 | ACC Viewer SDK | 预览打开成功率≥99% |
| **F-015** | 表单跳转 | 点击表单记录在新窗口打开 DWSS 表单详情页 | 快速访问原始业务数据 | 高 | DWSS URL 拼接逻辑 | 正确打开目标表单页 |
| **F-016** | 构件→资源反查 | 选择构件时展示所有关联的文件（含版本）和表单列表 | 以构件为中心的资源视图 | 高 | 绑定关系表、前端展示组件 | 实时显示完整资源记录 |
| **F-017** | 资源→构件反查 | 点击文件/表单时高亮所有关联构件，并显示 HyD Code | 资源到构件的反向追溯 | 高 | 绑定关系索引、Viewer SDK | 关联构件全部高亮显示 |
| **F-018** | 标签管理 | 管理员创建/编辑/删除标签（名称、颜色、描述） | 统一文件分类体系 | 中 | 标签表 | 标签可复用，无冗余数据 |
| **F-019** | 文件标签关联 | 管理员为文件添加多标签（支持批量操作） | 多维文件分类 | 中 | 文件-标签关系表 | 每个文件可关联≥1个标签 |
| **F-020** | 标签筛选 | 在文件列表中按标签组合筛选（支持 0-N 个标签条件） | 精准检索资源 | 中 | 标签检索服务 | 筛选准确率≥98% |
| **F-021** | 解绑操作 | 管理员解除构件与文件/表单的绑定关系（支持批量） | 维护数据准确性 | 高 | 绑定关系表 | 解绑后资源立即消失 |
| **F-022** | 绑定关系修改 | 管理员修改文件关联的构件集合（增删构件），保留历史版本记录 | 动态调整资源结构 | 高 | 构件选择器、版本管理 | 修改后视图实时更新 |
| **F-023** | 资源详情面板 | 展示构件绑定资源的详细信息：文件版本/上传时间、表单状态/创建者等 | 提供完整资源上下文 | 高 | 资源元数据接口 | 关键信息完整展示 |
| **F-024** | 审计日志 | 记录关键操作：用户登录、绑定/解绑、文件关联等（操作者、时间、对象 ID） | 数据变更追踪 | 中 | 日志系统 | 所有操作可追溯 |
| **F-025** | 构件索引缓存 | 缓存解析后的构件数据（HyD Code、属性），支持增量更新 | 提升重复访问性能 | 中 | 缓存服务 | 二次加载时间减少 50% |
| **F-026** | 多模型管理 | 项目关联多个 ACC 模型（如地上/地下），支持模型切换和跨模型检索 | 复杂工程场景支持 | 中 | 模型关系表 | 切换模型不影响既有绑定 |
| **F-027** | 报表导出（预留） | 导出项目资源报表（构件绑定覆盖率、文件分布等） | 业务数据分析 | 低 | 报表引擎 | 导出 Excel/PDF 格式完整 |
| **F-028** | 非模型资源管理 | 上传/管理项目文档（施工图、规范），独立于构件绑定 | 扩展项目知识库 | 低 | 文件存储服务 | 文件可检索下载 |
| **F-029** | 文件版本管理 | 展示文件历史版本，支持版本对比和回滚绑定 | 确保绑定版本准确性 | 高 | ACC 版本 API、版本历史表 | 可查看/选择任意历史版本 |
| **F-030** | 多对多关系维护 | 可视化编辑器管理构件↔文件/表单的复杂关联关系 | 高效维护复杂绑定关系 | 高 | 关系图谱组件 | 支持拖拽式批量关联/解绑 |
| **F-031** | 自动匹配预注册用户 | 系统预加载用户邮箱列表，ACC 登录时自动激活账户（默认访客） | 简化新用户接入流程 | 中 | 用户匹配服务 | 预注册用户首次登录即激活 |
| **F-032** | 模型更新同步 | 当 ACC 模型更新时，系统自动/手动同步元数据并提示版本差异 | 保持模型数据时效性 | 高 | ACC Webhook、版本比对逻辑 | 变更构件可识别并更新 |
| **F-033** | 权限分层控制 | 功能级权限：超级管理员管理用户/系统设置，管理员管理项目，访客仅查看 | 精细化权限控制 | 高 | RBAC 权限模型 | 各角色只能访问授权功能 |
| **F-034** | 全局搜索 | 跨项目检索构件（HyD Code）、文件、表单 | 快速定位资源 | 中 | 全文索引引擎 | 搜索结果精准排序 |
| **F-035** | 批量操作框架 | 支持批量：构件选择、文件关联、标签分配、绑定解绑 | 提升管理效率 | 高 | 批量任务队列 | 批量操作成功率≥99% |
| **F-036** | DWSS 系统对接配置 | 管理员配置 DWSS API 密钥、表单模板映射规则 | 确保表单跳转准确性 | 高 | 系统配置模块 | 点击表单正确跳转目标系统 |
| **F-037** | 资源回收站 | 删除的绑定关系进入回收站，支持恢复或永久清除 | 防止误操作数据丢失 | 低 | 软删除机制 | 数据可恢复，保留操作记录 |
| **F-038** | 通知中心 | 关键操作结果通知（绑定成功/失败、模型更新完成） | 实时反馈系统状态 | 低 | 消息推送服务 | 用户及时感知操作结果 |

## 七、详细需求说明

每个功能包括：

- **原型图**（可链接或嵌图）
- **交互规则**（流程说明、按钮逻辑等）
- **输入校验 & 参数规范**
- **异常处理方案**
- **后置条件与数据变更**

### F-001 构件绑定 DWSS 表单

- **原型图**：可视化 BIM 模型界面，点击构件弹出“关联表单”面板
- **交互规则**：
    - 支持多选构件批量绑定表单
    - 绑定后支持查看、解除绑定
    - 表单与构件为多对多关系
- **参数校验**：
    - 构件编码不能为空，必须为 BIM 模型中的合法 ID
    - 表单编号唯一，且存在于 DWSS 系统中
- **异常处理**：
    - 若构件模型未加载完成，禁用绑定按钮
    - 表单状态异常（如已归档）时显示绑定失败提示
- **成功标准**：
    - 构件点击后可弹出表单绑定窗口
    - 支持至少绑定 1 个表单
    - 操作响应时间 < 2s

### F-002 构件高亮与定位

- **描述**：在表单列表中点击某表单，可反向定位并高亮其绑定的 BIM 构件
- **要点**：
    - 支持自动聚焦至构件所在区域
    - 可配置高亮颜色与闪烁动画
    - 高亮时其他构件自动虚化处理

> 示例：
> 
> 
> ### 登录模块
> 
> - 问题：用户无法记住密码 → **目标**：支持一键登录
> - **输入**：手机号（11位）、验证码（6位）
> - **异常**：验证码错误提示、发送频率限制
> - **依赖**：短信服务、用户中心接口
> - **成功标准**：新增登录率 +5%，超时重试 < 2 次

## 八、非功能需求 (NFR)

| 类型 | 要求描述 | 测试标准 |
| --- | --- | --- |
| 性能 | 构件筛选、高亮交互 ≤1s，支持同时关联构件数≥1000 个 | 压测 & BIM 模型模拟验证 |
| 兼容性 | 支持 WebGL 模型浏览器（Chrome/Safari/Edge） | 浏览器兼容性测试 |
| 数据一致性 | 构件-表单-附件数据来自统一接口，确保更新同步 | 数据日志 + API 测试 |
| 安全性 | 表单访问按用户角色做最小权限控制 | 权限验证测试 |
| 可用性 | 视图操作步骤≤3次完成“构件定位 + 表单查看”全流程 | 用户测试反馈（任务完成率） |

## 九、迭代与上线计划

| 迭代 | 周期 | 功能包 | 验证点 |
| --- | --- | --- | --- |
| Sprint 1 | 2025-07-01 ～ 07-14 | 登录 + 基础权限 | 20 位用户内测通过率 100% |
| Sprint 2 | 2025-07-15 ～ 07-28 | 数据看板 + 导出 | 导出耗时 <5s |

> ⚠️ 依赖说明：每轮迭代完成后需校对下轮迭代的前置功能。
> 

## 十、运营 & 风险评估

- **风险点**：如短信服务波动、GDPR 法规变更、第三方依赖不稳定
- **应对策略**：定期监控、备选方案、合同保障
- **运营计划**：上线推广节奏、活动规划、监控指标（下载量、活跃度、转化率）

## 十一、附录 & 支持材料

- [AutoDesk Data Management API](https://aps.autodesk.com/en/docs/data/v2/developers_guide/overview/)
- 实体图 & 数据表设计
- API 文档接入
- UI Design / Prototype 比对
- 埋点清单 & 测试用例模板
- 术语表与缩略词说明